.chatroom{ data: { controller: "chatroom" }, style: "background-image: url('#{ image_url('fondo_chatrooms_index.jpg') }');"}
  .chatroom__header
    .chatroom__name
      = @chatroom.name
    .chatroom__user-list
      - @chatroom.users.each_with_index do |user, index|
        - if index + 1 != @chatroom.users.length
          = "#{user.username}, "
        - else 
          = "#{user.username}."
  .chatroom__container{ id: "message-list", data: { "chatroom-target": 'container', user_id: current_user.id, chatroom_id: @chatroom.id } }
    - @chatroom.messages.each do |message|
      = render partial: "messages/message", locals: { message: message }
  = form_for @message, url: chatroom_message_path(@chatroom), html: { class: 'chatroom__footer' } do |f|
    = f.text_field :body, class: 'chatroom__input', placeholder: "Escribe aqu√≠ tu mensaje", autofocus: true, data: { 'chatroom-target': 'input' }
    = f.submit 'Enviar', class: 'chatroom__button'